{% extends 'base.html' %}
{% block title %}📄 Download Your Sleep Report{% endblock %}

{% block content %}
<section class="report-container glow">
  <div class="report-header">
    <h2>📊 Your Personalized Sleep Report</h2>
    <p class="subtitle">🌙 Comprehensive analysis of your sleep health</p>
  </div>

  <div class="report-card glass-effect">
    <div class="report-summary">
      <h3><i class="fas fa-search"></i> Key Findings</h3>
      <ul class="report-details">
        <li>📅 <strong>Date:</strong> {{ report_date }}</li>
        <li>⭐ <strong>Sleep Quality:</strong> {{ sleep_quality }}</li>
        <li>⚠️ <strong>Disorder Risk:</strong> 
          <span class="risk-{{ disorder_risk|lower }}">{{ disorder_risk }}</span>
        </li>
        <li>⏱ <strong>Duration:</strong> {{ sleep_duration }} hours</li>
      </ul>
    </div>

    <div class="recommendation-box glowing-box">
      <h4>💡 Expert Recommendation</h4>
      <p>{{ recommendation }}</p>
    </div>
  </div>

  <div class="report-actions">
    <form action="{{ url_for('reportdownload') }}" method="post">
      <button type="submit" class="btn-primary pulse">
        📥 Download PDF Report
      </button>
    </form>

    <div class="secondary-actions">
      <a href="{{ url_for('tracker') }}" class="btn-secondary">
        📅 View Sleep Journal
      </a>
      <a href="{{ url_for('recommendations') }}" class="btn-secondary">
        🌟 Get More Tips
      </a>
    </div>
  </div>
</section>

<style>
.report-container {
  max-width: 900px;
  margin: auto;
  padding: 2rem;
  color: #fff;
}

.report-header {
  text-align: center;
  margin-bottom: 2rem;
}

.glass-effect {
  background: rgba(255, 255, 255, 0.07);
  backdrop-filter: blur(10px);
  border-radius: 18px;
  padding: 2rem;
  box-shadow: 0 0 30px rgba(138, 43, 226, 0.2);
}

.report-summary h3 {
  font-size: 1.6rem;
  color: #ffd700;
  margin-bottom: 1rem;
}

.report-details {
  list-style: none;
  padding-left: 0;
  font-size: 1.1rem;
}

.report-details li {
  margin-bottom: 0.8rem;
}

.risk-high {
  color: #f44336;
  font-weight: bold;
}

.risk-moderate {
  color: #ffc107;
  font-weight: bold;
}

.risk-low {
  color: #4caf50;
  font-weight: bold;
}

.recommendation-box {
  margin-top: 2rem;
  background: rgba(186, 104, 200, 0.1);
  border-left: 6px solid #ba68c8;
  border-radius: 12px;
  padding: 1.5rem;
  box-shadow: 0 0 12px rgba(255, 255, 255, 0.1);
}

.report-actions {
  margin-top: 2.5rem;
  text-align: center;
}

.report-actions form {
  margin-bottom: 1rem;
}

.btn-primary, .btn-secondary {
  font-size: 1rem;
  padding: 0.8rem 1.5rem;
  border-radius: 8px;
  border: none;
  text-decoration: none;
  display: inline-block;
  transition: background 0.3s ease, transform 0.2s ease;
}

.btn-primary {
  background: #ba68c8;
  color: #fff;
  box-shadow: 0 4px 14px rgba(186, 104, 200, 0.4);
}

.btn-primary:hover {
  background: #ab47bc;
  transform: scale(1.05);
}

.btn-secondary {
  background: rgba(255, 255, 255, 0.1);
  color: #fff;
  margin: 0.4rem;
  border: 1px solid rgba(255, 255, 255, 0.2);
}

.btn-secondary:hover {
  background: rgba(255, 255, 255, 0.2);
  transform: scale(1.03);
}

@media (max-width: 768px) {
  .report-container {
    padding: 1rem;
  }

  .report-details li {
    font-size: 1rem;
  }

  .btn-primary, .btn-secondary {
    font-size: 0.95rem;
    padding: 0.6rem 1.2rem;
  }
}
</style>
{% endblock %}